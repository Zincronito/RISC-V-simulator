<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador RISC-V</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/styles.css">
</head>

<body class="bg-gray-900 text-white">
    <div id="app" class="container mx-auto p-4">
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent">
                Simulador RISC-V
            </h1>
            <p class="text-gray-400 mt-2">Visualización del Datapath</p>
        </header>

        <!-- Panel de Control -->
        <div id="controls" class="bg-gray-800 rounded-lg p-6 mb-6">
            <div class="flex flex-wrap gap-4 justify-center items-center">
                <button id="btnStep" class="btn btn-blue">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="5 3 19 12 5 21 5 3"></polygon>
                    </svg>
                    Step
                </button>
                <button id="btnRun" class="btn btn-green">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="5 3 19 12 5 21 5 3"></polygon>
                    </svg>
                    Run
                </button>
                <button id="btnPause" class="btn btn-yellow hidden">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="6" y="4" width="4" height="16"></rect>
                        <rect x="14" y="4" width="4" height="16"></rect>
                    </svg>
                    Pause
                </button>
                <button id="btnReset" class="btn btn-red">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="1 4 1 10 7 10"></polyline>
                        <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>
                    </svg>
                    Reset
                </button>
                <button id="btnEdit" class="btn btn-purple">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                    </svg>
                    Editar
                </button>
                <div class="status-info">
                    <span class="label">PC:</span>
                    <span id="pcValue" class="value text-yellow-400">0</span>
                </div>
                <div class="status-info">
                    <span class="label">Etapa:</span>
                    <span id="stageValue" class="value text-green-400">IDLE</span>
                </div>
            </div>
        </div>

        <!-- Editor de Código -->
        <div id="editorPanel" class="bg-gray-800 rounded-lg p-6 mb-6 hidden">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-bold text-purple-400">Editor de Código Assembly</h2>
                <button id="btnCloseEditor" class="text-gray-400 hover:text-white">✕</button>
            </div>
            <textarea id="codeEditor" class="code-editor" placeholder="Escribe tu código RISC-V aquí...">addi x1, x0, 5
addi x2, x0, 3
add x3, x1, x2
sw x3, 0(x0)
lw x4, 0(x0)
beq x1, x2, 2
sub x5, x1, x2
or x6, x1, x2</textarea>
            <button id="btnAssemble" class="btn btn-green mt-4">
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="20 6 9 17 4 12"></polyline>
                </svg>
                Ensamblar y Cargar
            </button>
            <div class="mt-4 text-sm text-gray-400">
                <p class="font-bold mb-2">Instrucciones soportadas:</p>
                <ul class="list-disc list-inside space-y-1">
                    <li><span class="text-blue-400">Tipo R:</span> add, sub, and, or, xor, sll, srl, slt</li>
                    <li><span class="text-green-400">Tipo I:</span> addi, xori, ori, andi, slti</li>
                    <li><span class="text-purple-400">Tipo L:</span> lw</li>
                    <li><span class="text-yellow-400">Tipo S:</span> sw</li>
                    <li><span class="text-red-400">Tipo B:</span> beq, bne, blt, bge</li>
                </ul>
            </div>
        </div>

        <!-- Instrucción Actual -->
        <div id="currentInstruction" class="bg-gray-800 rounded-lg p-4 mb-6 hidden">
            <div class="flex flex-wrap gap-6 justify-center items-center">
                <div>
                    <span class="text-gray-400">Instrucción: </span>
                    <span id="instrText" class="text-cyan-400 font-mono text-lg font-bold"></span>
                </div>
                <div>
                    <span class="text-gray-400">Tipo: </span>
                    <span id="instrType" class="text-purple-400 font-bold text-lg"></span>
                </div>
                <div>
                    <span class="text-gray-400">Código: </span>
                    <span id="instrCode" class="text-yellow-400 font-mono text-sm"></span>
                </div>
            </div>
        </div>

        <!-- Datapath -->
        <div class="bg-gray-800 rounded-lg p-6 mb-6">
            <h2 class="text-2xl font-bold mb-4 text-center text-blue-400">Datapath - Camino de Datos</h2>
            <div id="datapath" class="overflow-x-auto"></div>
        </div>

        <!-- Registros y Memoria -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
            <!-- Registros -->
            <div class="bg-gray-800 rounded-lg p-6">
                <h3 class="text-xl font-bold mb-4 text-green-400">Banco de Registros</h3>
                <div id="registers" class="grid grid-cols-4 gap-3"></div>
            </div>

            <!-- Memoria -->
            <div class="bg-gray-800 rounded-lg p-6">
                <h3 class="text-xl font-bold mb-4 text-blue-400">Memoria de Datos</h3>
                <div id="memory" class="grid grid-cols-4 gap-3"></div>
            </div>
        </div>

        <!-- Programa -->
        <div class="bg-gray-800 rounded-lg p-6">
            <h3 class="text-xl font-bold mb-4 text-purple-400">Programa en Memoria</h3>
            <div id="program" class="space-y-2"></div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/assembler.js"></script>
    <script src="js/decoder.js"></script>
    <script src="js/executor.js"></script>
    <script src="js/datapath.js"></script>
    <script src="js/main.js"></script>
</body>

</html>